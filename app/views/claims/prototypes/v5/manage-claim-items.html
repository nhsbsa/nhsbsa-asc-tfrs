{% extends "./layouts/claims-main.html" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <div class="moj-page-header-actions">

        <div class="moj-page-header-actions__title">
          <span class="govuk-caption-xl">Direct care</span>
          <h1 class="govuk-heading-xl">Manage claims</h1>
        </div>
      
        <div class="moj-page-header-actions__actions">
      
          <div class="moj-button-menu">
            <div class="moj-button-menu__wrapper">
              
            <form method="post" action="/v5/new-claim-reset" class="govuk-!-margin-0">
                <button class="govuk-button moj-button-menu__item govuk-button--primary moj-page-header-actions__action" data-module="govuk-button" type="submit">Start a new claim</button>
            </form>
      
            </div>
          </div>
      
        </div>
        
      
    </div>  
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="moj-search govuk-!-padding-bottom-6">
              
      <form action="#" method="post">

      <div class="govuk-form-group">
          <label class="govuk-label moj-search__label govuk-!-font-weight-bold" for="search">
          Search for a learner or activity
          </label>

          <div id="search-hint" class="govuk-hint moj-search__hint ">
          You can search by a learner's name or by a course name
          </div>

          <input class="govuk-input moj-search__input " id="search" name="search" type="search" aria-describedby="search-hint">

      </div>

      <button class="govuk-button moj-search__button govuk-button--secondary" data-module="govuk-button">
          Search
      </button>

      </form>
    </div>
  </div>
</div>
    
<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <div class="govuk-tabs" data-module="govuk-tabs">
          <h2 class="govuk-tabs__title">
            Contents
          </h2>
          <ul class="govuk-tabs__list">
            {% for status in data['statuses'] %}
            <li class="govuk-tabs__list-item">
              <a class="govuk-tabs__tab" href="#{{ status.id }}">
                {{ status.name }} (202)
              </a>
            </li>
            {% endfor %}
          </ul>
          {% for status in data['statuses'] %}
          <!--Tabs-->
          <div class="govuk-tabs__panel" id="{{ status.id }}">
            <div class="govuk-grid-row">
              <div class="govuk-grid-column-full">
                <div class="moj-page-header-actions">
                  <div class="moj-page-header-actions__title">
                    <h2 class="govuk-heading-l">{{ status.name }} (21)</h2>
                  </div>
                  <div class="moj-page-header-actions__actions">
                    <div class="moj-action-bar">
                      <div class="moj-button-menu">
                        <div class="moj-button-menu__wrapper">
                          {% if status.id == 'incomplete' %}
                          <form method="post" action="/v5/new-evidence-reset" class="govuk-!-margin-0">
                            <button class="govuk-button moj-button-menu__item govuk-button--secondary" data-module="govuk-button" type="submit">Add Evidence</button>
                          </form>
                          {% elif status.id == 'ready-to-submit' %}
                          <button class="govuk-button moj-button-menu__item govuk-button--secondary " data-module="govuk-button">
                            Submit all claim items
                          </button>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="govuk-grid-row">
              <div class="govuk-grid-column-full">
                <table class="govuk-table">
                  <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                      <th class="govuk-table__header" scope="col">Claim ID</th>
                      <th class="govuk-table__header govuk-!-width-one-third" scope="col">Activity</th>
                      <th class="govuk-table__header" scope="col">Start Date</th>
                      <th class="govuk-table__header" scope="col">Learner ID</th>
                      <th class="govuk-table__header" scope="col">Learner name</th>
                    </tr>
                  </thead>
                  <tbody class="govuk-table__body">
                    {% for claim in data['claims'] %}
                    {% if claim.status == status.id %}
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell"> {{ claim.claimID }} </td>
                      <td class="govuk-table__cell">{{ claim.training.title }}</td>
                      <td class="govuk-table__cell">{{ claim.startDate | govukDate("truncate") }}</td>
                      <td class="govuk-table__cell">{{ claim.learner.id }}</td>
                      <td class="govuk-table__cell">{{ claim.learner.fullName }}</td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                  </tbody>
                </table>
            </div>
            </div>
          </div>
          {% endfor %}
      </div>
    </div>
</div>

{% endblock %}

{% block pageScripts %}
<script type="text/javascript" src="/public/javascripts/jquery-3.7.1.js"></script>
<script type="text/javascript" src="/public/javascripts/filter.js"></script>
{% endblock %}
