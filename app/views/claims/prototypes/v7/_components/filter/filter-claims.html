{% set formattedStartDates = data.claims | uniqueDates("startDate") %}
{% set variableDate = status.id | variableDateType %}
{% set formattedVariableDates = data.claims | uniqueDates(variableDate) %}


<div class="moj-filter">
    <div class="moj-filter__header">
        <div class="moj-filter__header-title">
            <h2 class="govuk-heading-m">Filter</h2>
        </div>
    </div>
    <div class="moj-filter__content">
        <div class="moj-filter__options">

            <form id="filterForm-{{ status.id }}"  onsubmit="applyFilters(event,'{{ status.id }}')">
            <button class="govuk-button" data-module="govuk-button" data-test-id="submit-button">
            Apply filters
            </button>
         
            <div class="govuk-form-group">
                <label class="govuk-label govuk-label--m" for="keywords">
                Keywords
                </label>
        
                <input class="govuk-input" id="keywords" name="keywords" type="text">
        
            </div>
            
            <div class="govuk-form-group">

                <fieldset class="govuk-fieldset">
        
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
        
                    Start date 
        
                    </legend>
                    <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                        {% set loopIndex = 0 %}
                        {% for monthYear in formattedStartDates %}
                        {% set checkboxId = 'startdate-' + loopIndex %}
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="{{ checkboxId }}" name="startdate" type="checkbox" value="{{ monthYear }}">
                            <label class="govuk-label govuk-checkboxes__label" for="{{ checkboxId }}">
                                {{ monthYear }}
                            </label>
            
                        </div>
                        {% set loopIndex = loopIndex + 1 %}
                        {% endfor %}
                    </div>
        
                </fieldset>
        
            </div>

            <div class="govuk-form-group">

            <fieldset class="govuk-fieldset">

                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">

                    {{ status.id | variableDate }}

                </legend>
                <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                    {% set loopIndex = 0 %}
                    {% for monthYear in formattedVariableDates %}
                    {% set checkboxId = 'variabledate-' + loopIndex %}
                    <div class="govuk-checkboxes__item">
                        <input class="govuk-checkboxes__input" id="{{ checkboxId }}" name="variabledate" type="checkbox" value="{{ monthYear }}">
                        <label class="govuk-label govuk-checkboxes__label" for="{{ checkboxId }}">
                            {{ monthYear }}
                        </label>
        
                    </div>
                    {% set loopIndex = loopIndex + 1 %}
                    {% endfor %}
                </div>
                

            </fieldset>

            </div>

            </form>
        </div>
    </div>
</div>